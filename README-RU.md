# laravel-news-crud

https://packagist.org/packages/sevenpluss/laravel-news-crud

я добавил в зависимости Debugbar чтобы сразу после установки можно было тестировать

данный код оформлен как composer пакет, и предназначен для установки в Laravel 5.4 

(установка laravel https://laravel.com/docs/5.4#installing-laravel)

__Минимальные требования:__ Laravel 5.4+, php7.1+ (потому как использую type hiting)

### Порядок установки:

#### 1  ставим пакет, кому как удобнее

через консоль

```shell
composer require sevenpluss/laravel-news-crud
```

__или__ через менеджер зависимостей в вашей IDE найти и установить пакет

```shell
sevenpluss/laravel-news-crud
```

__или__ через composer.json

```shell
"sevenpluss/laravel-news-crud": "^1.0"
```
затем выполнить команду 

```shell
composer update
```

#### 2 добавить сервис провайдер пакета в файл `config/app`

```php
'providers' => [
   ...
   Sevenpluss\NewsCrud\NewsCrudServiceProvider::class,
   ...
]
```

> Laravel 5.5 использует Package Auto-Discovery, поэтому нет необходимости ручками добавлять СервисПровайдеры

Убедимся что модель __App\User.php__ находится в месте по умолчанию.
Всё, далее файлы из коробки более не трогаем.


#### 3 - добавляем из пакета файлы типа миграции, конфиги, локали... и т.п.

```shell
php artisan vendor:publish
```

##### 4 выполнить миграцию таблиц для БД

```shell
php artisan migrate 
```
и обязательно, прямо очень, очень обязательно
```
composer dumpautoload
```

##### 5 заполнить Бд тестовыми данными

```shell
php artisan db:seed --class=CrudDatabaseSeeder
```

таблицы должны заполниться в таком порядке
```php
Seeding: CategoriesTableSeeder
Seeding: CrudUsersTableSeeder
Seeding: PostsTableSeeder
Seeding: CommentsTableSeeder
Seeding: TagsTableSeeder
```

готово, установка завершена

> загрузка тестовых данных, 1 раз из 20 __Faker__ может сломать загрузку данных, достаточно очистить БД, и повторить seeding


#### Про код, что применил и чем руководствовался

Код написан как composer пакет для laravel 5.4 

php7.1, type hiting 

В php коде придерживался стиля __PRS-2__
использован патернны __Repository__, __Decorator__

boostrap, jquery

__шаблонизаторы:__
серверный - twig, 
клиентский - underscore

css разметка оптимизирована на быстрый рендеринг браузерами (на сколько позволяет bootstrap)

Иконки используют векторную графику и сохранены как кастомный font-face шрифт 

разметка стуктурных данных: __NewsArticle__, __Comment__ по schema.org

немного ajax-а, через него мы добавляем комментарии, удаляем новости, категории.
Навигация по новостям содержит и простую и ajax навигацию.

Ajax навигаци использует pushState, отсюда и поддержка IE10+

Категории добавлять/Удалять может кто угодно с урла  
```
/category 
```
в меню хедера он подписан как __CRUD for categories__

Комментировать новости может кто угодно (юзер/гость)

Новости удалять может любой пользователь, а добавлять могут __только залогиненые__ пользователи с любого урла где есть новости, кроме главной страницы

регистрация/авторизация - элементарная (из коробки)

Целостновсть БД/Отношения настроены таким образом, что удаление __Пользователя__ влечёт за собой удаление всех новостей и комментариев у которых он владелец.

Удаление __Категорий__ влечёт за собой удаление, всех связаных новостей.

Удаление __Новости__ влечёт за собой удаление, всех связаных комментариев.

подход REST/CRUD использован для категорий и новостей

Код проверен и протестирован на laravel 5.4